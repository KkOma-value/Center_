"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[470],{94149:function(R,d,r){r.d(d,{Z:function(){return h}});var f=r(1413),u=r(67294),v={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},j=v,Z=r(91146),N=function(a,m){return u.createElement(Z.Z,(0,f.Z)((0,f.Z)({},a),{},{ref:m,icon:j}))},I=u.forwardRef(N),h=I},48028:function(R,d,r){r.r(d),r.d(d,{default:function(){return O}});var f=r(15009),u=r.n(f),v=r(99289),j=r.n(v),Z=r(5574),N=r.n(Z),I=r(67294),h=r(76772),i=r(8232),a=r(2453),m=r(26915),T=r(83622),y=r(87547),P=r(94149),k=r(66116),n={container:"container___bPfJ7",content:"content___D5ZsQ",formContainer:"formContainer___oV2bL",headerTitle:"headerTitle___Gro9h",registerForm:"registerForm___fTVdH",inputItem:"inputItem___TmN1G",prefixIcon:"prefixIcon___s1A57",submitButton:"submitButton___HLP7j",linkContainer:"linkContainer___mYKJE",link:"link___Nm4Xj",icon:"icon___TRw12",otherLoginIcons:"otherLoginIcons___eJpwG"},s=r(85893),F=function(){var C=i.Z.useForm(),L=N()(C,1),S=L[0],B=function(){var x=j()(u()().mark(function p(o){var t,l,c,g;return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Registration request parameters:",{account:o.username,password:o.password,checkPassword:o.confirm}),e.next=4,fetch("/api/user/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({account:o.username,password:o.password,checkPassword:o.confirm})});case 4:if(t=e.sent,console.log("Registration response status:",t.status,t.statusText),t.ok){e.next=13;break}return e.next=9,t.text();case 9:return l=e.sent,console.error("Error response content:",l),l.includes("<!DOCTYPE")?a.ZP.error("Request failed: Server returned HTML page instead of JSON data. API path might be wrong or backend service is not running properly"):a.ZP.error("Request failed: ".concat(t.status," ").concat(t.statusText)),e.abrupt("return");case 13:return e.prev=13,e.next=16,t.text();case 16:if(g=e.sent,console.log("Raw response:",g),g.trim()!==""){e.next=21;break}return a.ZP.error("Server returned empty response"),e.abrupt("return");case 21:c=JSON.parse(g),e.next=29;break;case 24:return e.prev=24,e.t0=e.catch(13),console.error("JSON parsing error:",e.t0),a.ZP.error("Response data format error: ".concat(e.t0.message)),e.abrupt("return");case 29:console.log("Registration response data:",c),c&&c>0?(a.ZP.success("Registration successful!"),h.history.push("/user/login")):c===null?a.ZP.error("Request parameters are empty!"):c===-1?a.ZP.error("Username, password or confirm password is empty!"):a.ZP.error("Registration failed, server returned: ".concat(JSON.stringify(c))),e.next=37;break;case 33:e.prev=33,e.t1=e.catch(0),console.error("Registration request exception:",e.t1),a.ZP.error("Registration failed, please check your network connection: ".concat(e.t1.message));case 37:case"end":return e.stop()}},p,null,[[0,33],[13,24]])}));return function(o){return x.apply(this,arguments)}}();return(0,s.jsxs)("div",{className:n.container,children:[(0,s.jsx)("div",{className:n.content,children:(0,s.jsxs)("div",{className:n.formContainer,children:[(0,s.jsx)("h2",{className:n.headerTitle,children:"The kKoma"}),(0,s.jsxs)(i.Z,{form:S,onFinish:B,className:n.registerForm,children:[(0,s.jsx)(i.Z.Item,{name:"username",className:n.inputItem,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"},{min:3,message:"\u8D26\u53F7\u957F\u5EA6\u4E0D\u80FD\u5C11\u4E8E3\u4E2A\u5B57\u7B26\uFF01"}],children:(0,s.jsx)(m.Z,{size:"large",prefix:(0,s.jsx)(y.Z,{className:n.prefixIcon}),placeholder:"\u7528\u6237\u540D"})}),(0,s.jsx)(i.Z.Item,{name:"password",className:n.inputItem,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"},{min:6,message:"\u5BC6\u7801\u957F\u5EA6\u4E0D\u80FD\u5C11\u4E8E6\u4E2A\u5B57\u7B26\uFF01"}],children:(0,s.jsx)(m.Z.Password,{size:"large",prefix:(0,s.jsx)(P.Z,{className:n.prefixIcon}),placeholder:"\u5BC6\u7801"})}),(0,s.jsx)(i.Z.Item,{name:"confirm",className:n.inputItem,rules:[{required:!0,message:"\u8BF7\u786E\u8BA4\u5BC6\u7801\uFF01"},function(x){var p=x.getFieldValue;return{validator:function(t,l){return!l||p("password")===l?Promise.resolve():Promise.reject(new Error("\u4E24\u6B21\u8F93\u5165\u7684\u5BC6\u7801\u4E0D\u5339\u914D!"))}}}],children:(0,s.jsx)(m.Z.Password,{size:"large",prefix:(0,s.jsx)(P.Z,{className:n.prefixIcon}),placeholder:"\u786E\u8BA4\u5BC6\u7801"})}),(0,s.jsx)("div",{className:n.linkContainer,children:(0,s.jsx)(h.Link,{to:"/user/login",className:n.link,children:"\u8FD4\u56DE\u767B\u5F55"})}),(0,s.jsx)(i.Z.Item,{children:(0,s.jsx)(T.ZP,{type:"primary",htmlType:"submit",className:n.submitButton,children:"\u6CE8\u518C"})})]}),(0,s.jsx)("div",{className:n.otherLoginIcons,children:(0,s.jsx)("a",{className:n.icon,href:"https://github.com/KkOma-value/The_kkoma_center",target:"_blank",rel:"noopener noreferrer",children:(0,s.jsx)("img",{src:"/github.png",alt:"github"})})})]})}),(0,s.jsx)(k.Z,{})]})},O=F}}]);
